<!DOCTYPE html>
<html lang="en">
    <head>
        {% block head %}
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        {% if config.description -%}
        <meta name="description" content="{{ config.description }}">
        {% endif %}

        <meta property="og:type" content="website">
        <meta property="og:url" content="{{ config.base_url }}">
        <meta property="og:title" content="{{ config.title }}">
        {% if config.description -%}
        <meta property="og:description" content="{{ config.description }}">
        {% endif %}
        {% if config.extra.social_image -%}
        <meta property="og:image" content="{{ config.extra.social_image }}">
        {% endif %}

        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="{{ config.title }}">
        {% if config.description -%}
        <meta name="twitter:description" content="{{ config.description }}">
        {% endif %}
        {% if config.extra.social_image -%}
        <meta name="twitter:image" content="{{ config.extra.social_image }}">
        {% endif %}

        <title>{% block title %}{{ config.title }}{% endblock title %}</title>

        <script>
            (function() {
                try {
                    var stored = localStorage.getItem("theme");
                    var prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
                    if (stored === "dark" || (!stored && prefersDark)) {
                        document.documentElement.setAttribute("data-theme", "dark");
                    }
                } catch (e) {}
            })();
        </script>

        {% block css %}
            <link rel="stylesheet" href="{{ get_url(path="theme.css", trailing_slash=false) | safe }}">
        {% endblock css %}
        {% endblock head %}
    </head>
    <body>
        <div class="content">
        {% block body%}
        {% block header %}
            <header>
                <div class="header-left">
                    <a href="{{ config.base_url }}" class="logo">{{ config.title }}</a>
                </div>
                <div class="header-right">
                    <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
                      <ul>
                        <li class="nav">
                            <a itemprop="url" href="{{ config.base_url }}">
                                <span itemprop="name">Home</span>
                            </a>
                        </li>
                        {% set index = get_section(path="_index.md") %}
                        {% for s in index.subsections %}
                            {% set subsection = get_section(path=s) %}
                            {% if subsection.title != "Other" %}
                            <li class="nav">
                                <a itemprop="url" href="{{ subsection.permalink | safe}}">
                                    <span itemprop="name">{{ subsection.title }}</span>
                                </a>
                            </li>
                            {% endif %}
                        {% endfor %}
                        {% set books = get_page(path="about/books.md") %}
                        {% set projects = get_page(path="about/projects.md") %}
                        <li class="nav">
                            <a itemprop="url" href="{{ books.permalink | safe }}">
                                <span itemprop="name">Books</span>
                            </a>
                        </li>
                        <li class="nav">
                            <a itemprop="url" href="{{ projects.permalink | safe }}">
                                <span itemprop="name">Projects</span>
                            </a>
                        </li>
                        {% if config.extra.github %}
                        <li class="nav">
                            <a itemprop="url" href="https://github.com/{{ config.extra.github }}">
                                <img class="icon" src="{{ config.base_url }}/icons/github.svg" alt="Github">
                            </a>
                        </li>
                        {% endif %}
                        {% if config.extra.twitter %}
                        <li class="nav">
                            <a itemprop="url" href="https://twitter.com/{{ config.extra.twitter }}">
                                <img class="icon" src="{{ config.base_url }}/icons/twitter.svg" alt="Twitter">
                            </a>
                        </li>
                        {% endif %}
                        <li class="nav">
                            <button class="theme-toggle" type="button" aria-label="Toggle dark mode" title="Toggle dark mode">
                                <svg class="icon-moon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                    <path fill="currentColor" d="M21 15.5A9 9 0 0 1 8.5 3a7 7 0 1 0 12.5 12.5Z"/>
                                </svg>
                                <svg class="icon-sun" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                                    <path fill="currentColor" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-16a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm0 18a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1Zm10-8a1 1 0 0 1-1 1h-2a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1ZM5 12a1 1 0 0 1-1 1H2a1 1 0 1 1 0-2h2a1 1 0 0 1 1 1Zm13.78 6.78a1 1 0 0 1 0 1.42l-1.42 1.42a1 1 0 1 1-1.42-1.42l1.42-1.42a1 1 0 0 1 1.42 0ZM7.06 7.06a1 1 0 0 1 0 1.42L5.64 9.9A1 1 0 1 1 4.22 8.5l1.42-1.42a1 1 0 0 1 1.42 0Zm12.72-2.84a1 1 0 0 1 0 1.42l-1.42 1.42a1 1 0 0 1-1.42-1.42l1.42-1.42a1 1 0 0 1 1.42 0ZM7.06 16.94a1 1 0 0 1 0 1.42L5.64 19.78a1 1 0 1 1-1.42-1.42l1.42-1.42a1 1 0 0 1 1.42 0Z"/>
                                </svg>
                            </button>
                        </li>
                      </ul>
                    </nav>
                </div>
            </header>
        {% endblock header %}
        {% block content %}
        <main>
            {% block main %}
            {% if section %}
                <article itemscope itemtype="http://schema.org/BlogPosting">
                    <div itemprop="headline">
                        <h1>{{ section.title }}</h1>
                        <div class="border"></div>
                    </div>
                    {% if section.content %}
                    <div itemprop="articleBody">
                        {{ section.content | safe }}
                    </div>
                    {% endif %}
                </article>
            {% else %}
                <h1>{{ config.title }}</h1>
                <div class="border"></div>
            {% endif %}
            {% endblock main %}
        </main>
        {% endblock content %}
        <footer>
            {% block footer %}
            <div class="border"></div>
            <div class="footer">
                <small class="footer-left">
                    Copyright &copy; {{ config.extra.author }}
                </small>
                <small class="footer-right">
                    Powered by <a href="https://www.getzola.org">Zola</a> | Theme <a href="https://github.com/barlog-m/oceanic-zen">Oceanic Zen</a>
                </small>
            </div>
        {% endblock footer %}
        </footer>
    {% endblock body%}
        </div>
        <script src="{{ get_url(path="js/theme-toggle.js", trailing_slash=false) | safe }}"></script>
    </body>
</html>
